{"version":3,"sources":["./src/app/pages/product-category/category.html","./src/app/pages/product-category/category-routing.module.ts","./src/app/pages/product-category/category.module.ts","./src/app/pages/product-category/category.scss","./src/app/pages/product-category/category.ts","./src/app/providers/product-category-provider.ts"],"names":[],"mappings":"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","file":"product-category-category-module-es2015.js","sourcesContent":["export default \"<!--\\r\\n  Generated template for the ProductCategoryListPage page.\\r\\n\\r\\n  See http://ionicframework.com/docs/components/#navigation for more info on\\r\\n  Ionic pages and navigation.\\r\\n-->\\r\\n<ion-header>\\r\\n  <ion-toolbar color=\\\"crimson\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button (click)=\\\"backButton()\\\"><ion-icon name=\\\"arrow-back\\\"></ion-icon></ion-button>\\r\\n    </ion-buttons>\\r\\n   <ion-title>\\r\\n      Product Category\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"card-background-page\\\">\\r\\n   \\r\\n\\t<div *ngIf=\\\"basketObjObservable | async as myBasket; else loadingErrorTemplate\\\">\\r\\n\\t\\t<div *ngIf = \\\"myBasket.totalItemsCount != 0\\\">\\r\\n\\r\\n\\t\\t\\r\\n\\t\\t<ion-fab vertical=\\\"top\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\" >\\r\\n\\t\\t\\t<ion-fab-button   outline routerLink=\\\"/app/tabs/market/my-basket\\\">\\r\\n\\t\\t\\t\\t<ion-badge >{{myBasket.totalItemsCount}}</ion-badge>\\r\\n\\t\\t\\t\\t<ion-icon name=\\\"cart-sharp\\\"></ion-icon></ion-fab-button>\\r\\n\\t\\t  </ion-fab>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\t<div *ngIf=\\\"productCatgeoryListObservable | async as catList ; else loadingErrorTemplate\\\">\\r\\n\\t<ion-grid>\\r\\n\\t\\t\\t<ion-row>\\r\\n\\t\\t\\t\\t<ion-col col-4 *ngFor=\\\"let category of catList\\\" size=\\\"4\\\">\\r\\n\\t\\t\\t\\t\\t<ng-container *ngIf=\\\"category != undefined; then pccard;\\\">\\r\\n\\t\\t\\t\\t\\t</ng-container>\\r\\n\\t\\t\\t\\t\\t<ng-template #pccard>\\r\\n\\t\\t\\t\\t\\t\\t<ion-card [routerLink]=\\\"['/app/tabs/market/product-list',category.id,category.storeCode]\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<ng-container *ngIf=\\\"category.imageURL != null; then customImage;else defaultImage\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t</ng-container>\\r\\n\\t\\t\\t\\t\\t\\t\\t<ng-template #customImage>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img [src]=\\\"category.imageURL\\\" />\\r\\n              </ng-template>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<ng-template #defaultImage>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img\\r\\n                  src=\\\"../../../assets/img/product_category.png\\\"\\r\\n                />\\r\\n              </ng-template>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ion-row class=\\\"cat-name\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<ion-col col-12 align-self-center text-center>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div>{{category.name}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</ion-col>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ion-row>\\r\\n\\t\\t\\t\\t\\t\\t</ion-card>\\r\\n\\t\\t\\t\\t\\t</ng-template>\\r\\n\\t\\t\\t\\t</ion-col>\\r\\n\\t\\t\\t</ion-row>\\r\\n\\r\\n\\t</ion-grid>\\r\\n\\t</div>\\r\\n\\t<ng-template #loadingErrorTemplate>\\r\\n\\t\\t<div class=\\\"spin\\\"> <ion-spinner name=\\\"bubbles\\\"></ion-spinner>\\r\\n\\t\\t  </div>\\r\\n\\t\\t  \\r\\n\\t  </ng-template>\\r\\n</ion-content>\\r\\n<!--\\r\\n<ion-footer class=\\\"basket-footer\\\">\\r\\n\\t<ion-toolbar>\\r\\n   <app-footer-basket [basketFooterObj]=\\\"basketFooterObj\\\"></app-footer-basket>\\r\\n\\t</ion-toolbar>\\r\\n\\r\\n</ion-footer>  -->\";","import { NgModule } from '@angular/core';\r\nimport {RouterModule,  Routes } from '@angular/router';\r\nimport { CategoryListPage } from './category';\r\n\r\n\r\nconst routes:Routes=[\r\n  {\r\n  path:'',\r\n  component:CategoryListPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [ RouterModule.forChild(routes)],\r\n  exports:[RouterModule],\r\n})\r\nexport class CategoryRoutingModule { }","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { CategoryListPage } from './category';\r\nimport { CategoryRoutingModule } from './category-routing.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    CategoryRoutingModule\r\n  ],\r\n  declarations: [\r\n    CategoryListPage\r\n  ],\r\n  entryComponents: [\r\n    CategoryListPage\r\n  ]\r\n})\r\nexport class CategoryModule { }","export default \"ion-toolbar {\\n  color: white;\\n}\\n\\n.cat-name {\\n  background-color: crimson;\\n  font-weight: bold;\\n  color: white;\\n}\\n\\n.spin {\\n  position: fixed;\\n  left: 50%;\\n  top: 50%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcHJvZHVjdC1jYXRlZ29yeS9DOlxcSW9uaWNQcm9qZWN0XFxwbmstc2hvcHBpbmctaW9uaWM1L3NyY1xcYXBwXFxwYWdlc1xccHJvZHVjdC1jYXRlZ29yeVxcY2F0ZWdvcnkuc2NzcyIsInNyYy9hcHAvcGFnZXMvcHJvZHVjdC1jYXRlZ29yeS9jYXRlZ29yeS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRUksWUFBQTtBQ0FKOztBREVBO0VBQ0kseUJBQUE7RUFDQSxpQkFBQTtFQUNBLFlBQUE7QUNDSjs7QURDRTtFQUVFLGVBQUE7RUFDQSxTQUFBO0VBQ0EsUUFBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvcHJvZHVjdC1jYXRlZ29yeS9jYXRlZ29yeS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLXRvb2xiYXJcclxue1xyXG4gICAgY29sb3I6d2hpdGU7XHJcbn1cclxuLmNhdC1uYW1lIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IGNyaW1zb247XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICB9XHJcbiAgLnNwaW5cclxuICB7XHJcbiAgICBwb3NpdGlvbjpmaXhlZDtcclxuICAgIGxlZnQ6NTAlO1xyXG4gICAgdG9wOjUwJTtcclxuICB9IiwiaW9uLXRvb2xiYXIge1xuICBjb2xvcjogd2hpdGU7XG59XG5cbi5jYXQtbmFtZSB7XG4gIGJhY2tncm91bmQtY29sb3I6IGNyaW1zb247XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBjb2xvcjogd2hpdGU7XG59XG5cbi5zcGluIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICBsZWZ0OiA1MCU7XG4gIHRvcDogNTAlO1xufSJdfQ== */\";","import { Component, OnInit } from \"@angular/core\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { AlertController, LoadingController,  NavController, Platform } from \"@ionic/angular\";\r\nimport { concat, from,  Observable, of, throwError } from \"rxjs\";\r\nimport { catchError, concatMap, delay, map } from \"rxjs/operators\";\r\nimport { BasketFooterObj, BasketObj } from \"../../interfaces/basket-interface\";\r\nimport { ProductCategory  } from \"../../interfaces/product-category\";\r\nimport { Shop, StoreServiceArea } from \"../../interfaces/shop-list\";\r\nimport { BasketProvider } from \"../../providers/basket-provider\";\r\nimport { CategoryListProvider } from \"../../providers/product-category-provider\";\r\nimport { ShopListProvider } from \"../../providers/shoplist-provider\";\r\nimport { BuildGridArray } from \"../../Utility/utility\";\r\n\r\n\r\n/**\r\n * Generated class for the ShoplistPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@Component({\r\n  selector: \"page-categoryList\",\r\n  templateUrl: \"category.html\",\r\n    styleUrls: [\"category.scss\"]\r\n})\r\nexport class CategoryListPage implements OnInit {\r\n  productCatgeoryListObservable:Observable<ProductCategory[]>\r\n  basketObjObservable:Observable<BasketObj>;\r\n  defaultHref='';;\r\n\r\n  constructor(\r\n    public categoryListProvider: CategoryListProvider,public alert:AlertController,\r\n    public loadingController:LoadingController, public basketProvider: BasketProvider,\r\n    public shopProvider:ShopListProvider,public platform:Platform,public navCtrl: NavController,\r\n    private route: ActivatedRoute\r\n  ) {\r\n    const storeCode = this.route\r\n                    .snapshot\r\n                    .paramMap\r\n                    .get('storeCode'); //get the shopcode from params\r\n this.platform.backButton.subscribeWithPriority(10, () => {\r\n    console.log('Handler was called!');\r\n  });\r\n \r\n  }\r\n  \r\n ngOnInit(){\r\n  const storeCode = this.route\r\n                    .snapshot\r\n                    .paramMap\r\n                    .get('storeCode'); //get the shopcode from params\r\n\r\n   // load product category.\r\n    this.productCatgeoryListObservable =  this.categoryListProvider\r\n                                          .getActiveProductCategoryListByShopCode(storeCode)\r\n\r\n   // initiate the basket. (load shop data and then initaite basket)                                      \r\n   this.basketObjObservable = this.shopProvider\r\n   .getActiveShopByStoreCode(storeCode)\r\n   .pipe(\r\n    concatMap(\r\n      s => this.basketProvider.initiateBasket(s)\r\n           .pipe(map( basket => {\r\n            \r\n              let totalItemsCount =  0;\r\n            basket.items.forEach(item => \r\n              {\r\n               totalItemsCount = totalItemsCount+ item.quantity;\r\n              });\r\n              console.log(\"Count is :\"+totalItemsCount);\r\n            return ({...basket,totalItemsCount:totalItemsCount})\r\n \r\n           } ))\r\n    ));\r\n}\r\n\r\n  ionViewDidEnter() {\r\n      console.log(\"ViewDidEnter\");\r\n    this.defaultHref = `/app/tabs/market/shoplist`;\r\n\r\n    // refresh basket on everytime view loaded.\r\n   this.basketObjObservable = this.basketProvider\r\n                              .getBasketForOrder()\r\n                              .pipe(map( basket => {                                    \r\n                                let totalItemsCount =  0;\r\n                                       if(basket != undefined){\r\n                                basket.items.map(item => {\r\n                                  totalItemsCount = totalItemsCount+ item.quantity;\r\n                                })\r\n                              }\r\n  return ({...basket,totalItemsCount:totalItemsCount})\r\n  } ))\r\n  }\r\n\r\n   backButton()\r\n  {\r\n   console.log(\"back button clicked\");\r\n   this.basketProvider.getBasketForOrder()\r\n                              .pipe(map( basket => {                                    \r\n                                let totalItemsCount =  0;\r\n                                if(basket != undefined){\r\n                                  basket.items.map(item => {\r\n                                    totalItemsCount = totalItemsCount+ item.quantity;\r\n                                  })}\r\n  return ({...basket,totalItemsCount:totalItemsCount})\r\n  } )).subscribe(async data =>{\r\n    if(data.totalItemsCount == 0)\r\n    {\r\n      // navigate to page\r\n      console.log(\"allow to navigate\");\r\n      this.navCtrl.pop();\r\n    }\r\n    else{\r\n     await this.presentAlert();\r\n      console.log(\"Display popup\");\r\n    }\r\n  })\r\n\r\n\r\n  }\r\n  async presentAlert() {\r\n    const alert = await this.alert.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Alert',\r\n      subHeader: 'Back to Market?',\r\n      message: 'you have items in your cart. Cart will be empty if you press Ok.',\r\n      buttons: [\r\n      {\r\n        text:'Ok',\r\n        handler:()=>{\r\n       // this.basketProvider.emptyBasket();  system automatically clear the basket.\r\n        this.navCtrl.pop();\r\n        }\r\n      },\r\n      {\r\n        text:'Cancel',\r\n        handler:()=>{\r\n          console.log(\"do nothing\");\r\n        }\r\n\r\n      }\r\n      \r\n      ]\r\n\r\n    });\r\n    await alert.present();\r\n  }\r\n}\r\n","import { HttpClient, HttpErrorResponse, HttpHeaders } from \"@angular/common/http\";\r\nimport { Injectable } from \"@angular/core\";\r\nimport { AngularFirestore, DocumentChangeAction } from \"@angular/fire/firestore\";\r\nimport { of, Observable,throwError  } from \"rxjs\";\r\nimport { catchError, first, retry, toArray } from 'rxjs/operators';\r\nimport { map } from \"rxjs/operators\";\r\nimport { environment } from '../../environments/environment'\r\nimport { ProductCategory } from \"../interfaces/product-category\";\r\n@Injectable({ providedIn: \"root\" })\r\nexport class CategoryListProvider {\r\n  \r\n  /* Data Initialization */\r\n  constructor(public http: HttpClient, private angularFireCloudStore: AngularFirestore) {}\r\n\r\n\r\ngetProductCategoryList(shopCode:string):Observable<ProductCategory[]>\r\n{\r\n  \r\nreturn this.http.get<ProductCategory[]>(environment.productCategoryListAPI)\r\n.pipe(\r\n  retry(3),\r\n  catchError(this.handleError)\r\n);\r\n}\r\n\r\n//Get active product catgeory for the given shopCode.\r\ngetActiveProductCategoryListByShopCode(shopCode:string):Observable<ProductCategory[]>\r\n{\r\n\r\nconst productCategoryRef = this.angularFireCloudStore\r\n                            .collection(environment.SHOP_LIST_COLLECTION)\r\n                            .doc(shopCode)\r\n                            .collection<ProductCategory>(environment.PRODUCT_CATEGORY, ref => ref.where(\"status\",\"==\",\"a\"))\r\n                            .snapshotChanges()\r\n                            .pipe(\r\n                              map(data =>{\r\n                                return data.map(finalData =>{\r\n                                    const propdCatObj = finalData.payload.doc.data() as ProductCategory\r\n                                    const id  = finalData.payload.doc.id\r\n\r\n                                    return {id, ...propdCatObj}\r\n                                }\r\n                                )\r\n                              }),\r\n                              catchError(err => this.handleError(err)));\r\n                            \r\n                            return productCategoryRef;\r\n\r\n}\r\n\r\n  private handleError(error: HttpErrorResponse) {\r\n  if (error.error instanceof ErrorEvent) {\r\n    // A client-side or network error occurred. Handle it accordingly.\r\n    console.error('An error occurred:', error.error.message);\r\n  } else {\r\n    // The backend returned an unsuccessful response code.\r\n    // The response body may contain clues as to what went wrong.\r\n    console.error(\r\n      `Backend returned code ${error.status}, ` +\r\n      `body was: ${error.error}`);\r\n\r\n      console.error(\"Detailed error is:\"+error);\r\n  }\r\n  // Return an observable with a user-facing error message.\r\n  return throwError(\r\n    'Something bad happened; please try again later.');\r\n}\r\n}\r\n"],"sourceRoot":"webpack:///"}