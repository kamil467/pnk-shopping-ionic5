function _defineProperties(l,n){for(var u=0;u<n.length;u++){var t=n[u];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function _createClass(l,n,u){return n&&_defineProperties(l.prototype,n),u&&_defineProperties(l,u),l}function _classCallCheck(l,n){if(!(l instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{pXY8:function(l,n,u){"use strict";u.r(n),u.d(n,"ProductListModuleNgFactory",(function(){return R}));var t,e=u("8Y7J"),r=function l(){_classCallCheck(this,l)},o=u("pMnS"),c=u("MKJQ"),a=u("sZkV"),i=u("iInd"),b=u("SVse"),s=u("mrSG"),f=u("FvS8"),g=u("Cfvw"),d=u("z6cu"),p=u("un/a"),h=u("JIr8"),m=u("5+tZ"),k=u("SxV6"),v=u("IAdc"),w=u("lJxs"),x=u("AytR"),C=u("IheW"),O=u("wD+u"),P=((t=function(){function l(n,u){_classCallCheck(this,l),this.http=n,this.angularFireCloudStore=u}return _createClass(l,[{key:"getProductsByCategory",value:function(l){var n=this;return this.http.get(x.a.productListAPI).pipe(Object(p.a)(3),Object(h.a)((function(l){return n.handleError(l)})))}},{key:"getActiveProductMappingListByCategoryCode",value:function(l,n){var u=this;return this.angularFireCloudStore.collection(x.a.SHOP_LIST_COLLECTION).doc(n).collection(x.a.PRODUCT_CATEGORY_MAPPING,(function(n){return n.where("categoryId","==",l)})).valueChanges().pipe(Object(h.a)((function(l){return u.handleError(l,"getActiveProductMappingListByCategoryCode")})))}},{key:"getActiveProduct",value:function(l,n){var u=this;return this.angularFireCloudStore.collection(x.a.SHOP_LIST_COLLECTION).doc(n).collection(x.a.PRODUCT_LIST,(function(l){return l.where("status","==","a")})).doc(l).valueChanges().pipe(Object(w.a)((function(n){return console.log("data is :"+n.name),Object.assign(Object.assign({},n),{id:l})})),Object(h.a)((function(l){return u.handleError(l,"getActiveProduct")})))}},{key:"getActiveProductList",value:function(l,n){var u=this;return this.getActiveProductMappingListByCategoryCode(l,n).pipe(Object(m.a)((function(l){return Object(g.a)(l).pipe(Object(m.a)((function(l){return u.getActiveProduct(l.productId,n).pipe(Object(w.a)((function(l){return Object.assign({},l)})),Object(k.a)())})),Object(v.a)())})),Object(h.a)((function(l){return u.handleError(l,"getActiveProductList")})))}},{key:"handleError",value:function(l){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return l.error instanceof ErrorEvent?console.error("An error occurred:",l.error.message):(console.error("Backend returned code ".concat(l.status,", body was: ")+l.error),console.error("Detailed error is :"+l+"and caller is:"+n)),Object(d.a)("Something bad happened; please try again later.")}}]),l}()).\u0275prov=e.ac({factory:function(){return new t(e.bc(C.c),e.bc(O.a))},token:t,providedIn:"root"}),t),I=function(){function l(n,u,t,e,r){_classCallCheck(this,l),this.productListProvider=n,this.basketProvider=u,this.loader=t,this.alert=e,this.route=r,this.defaultHref=""}return _createClass(l,[{key:"ionViewDidEnter",value:function(){this.defaultHref="/app/tabs/market/product-category-list",this.getBasketFromMemory()}},{key:"ngOnInit",value:function(){var l=this.route.snapshot.paramMap.get("storeCode"),n=this.route.snapshot.paramMap.get("productCategoryCode");this.categoryName=this.route.snapshot.paramMap.get("categoryName"),this.allProductsAbservable=this.productListProvider.getActiveProductList(n,l),this.getBasketFromMemory()}},{key:"getBasketFromMemory",value:function(){this.basketObjObservable=this.basketProvider.getBasketDirect()}},{key:"presentAlert",value:function(l,n){return Object(s.b)(this,void 0,void 0,regeneratorRuntime.mark((function u(){var t;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.alert.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Error Occurred:"+l,message:"Error:"+n,buttons:["OK"]});case 2:return t=u.sent,u.next=5,t.present();case 5:case"end":return u.stop()}}),u,this)})))}},{key:"addToBasket",value:function(l){console.log("add to basket clicked"+l.name),l.inStock&&(this.basketProvider.addItemToBasket(l),this.getBasketFromMemory())}}]),l}(),y=e.vb({encapsulation:0,styles:[[".card-background-page[_ngcontent-%COMP%]{background-color:#b94545}.card-background-page[_ngcontent-%COMP%]   .newprice[_ngcontent-%COMP%]{text-align:end}.card-background-page[_ngcontent-%COMP%]   .cart-button[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff}.card-background-page[_ngcontent-%COMP%]   .stockin[_ngcontent-%COMP%]{background-color:#dc143c;color:#f7f4f4}.card-background-page[_ngcontent-%COMP%]   .out-stock[_ngcontent-%COMP%]{opacity:.5}.card-background-page[_ngcontent-%COMP%]   .col-end-align[_ngcontent-%COMP%]{text-align:end}ion-toolbar[_ngcontent-%COMP%]{color:#fff}.spin[_ngcontent-%COMP%]{position:fixed;left:50%;top:50%}"]],data:{}});function M(l){return e.Zb(0,[(l()(),e.xb(0,0,null,null,11,"div",[],null,null,null,null,null)),(l()(),e.xb(1,0,null,null,10,"ion-fab",[["horizontal","end"],["slot","float"],["vertical","top"]],null,null,null,c.wb,c.q)),e.wb(2,49152,null,0,a.x,[e.h,e.l,e.z],{horizontal:[0,"horizontal"],vertical:[1,"vertical"]},null),(l()(),e.xb(3,0,null,0,8,"ion-fab-button",[["routerLink","/app/tabs/market/my-basket"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Mb(l,5).onClick()&&t),"click"===n&&(t=!1!==e.Mb(l,6).onClick(u)&&t),t}),c.ub,c.r)),e.wb(4,49152,null,0,a.y,[e.h,e.l,e.z],null,null),e.wb(5,16384,null,0,i.n,[i.m,i.a,[8,null],e.D,e.l],{routerLink:[0,"routerLink"]},null),e.wb(6,737280,null,0,a.Lb,[b.j,a.Gb,e.l,i.m,[2,i.n]],null,null),(l()(),e.xb(7,0,null,0,2,"ion-badge",[],null,null,null,c.hb,c.d)),e.wb(8,49152,null,0,a.k,[e.h,e.l,e.z],null,null),(l()(),e.Wb(9,0,["",""])),(l()(),e.xb(10,0,null,0,1,"ion-icon",[["name","cart-sharp"]],null,null,null,c.Ab,c.w)),e.wb(11,49152,null,0,a.D,[e.h,e.l,e.z],{name:[0,"name"]},null)],(function(l,n){l(n,2,0,"end","top"),l(n,5,0,"/app/tabs/market/my-basket"),l(n,6,0),l(n,11,0,"cart-sharp")}),(function(l,n){l(n,9,0,n.component.basketObjObservable.totalItemsCount)}))}function z(l){return e.Zb(0,[(l()(),e.xb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,M)),e.wb(2,16384,null,0,b.m,[e.P,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,0!=n.component.basketObjObservable.totalItemsCount)}),null)}function L(l){return e.Zb(0,[(l()(),e.xb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function _(l){return e.Zb(0,[(l()(),e.xb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function j(l){return e.Zb(0,[(l()(),e.xb(0,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,(function(l,n){l(n,0,0,n.parent.parent.context.$implicit.productImageUrl)}))}function A(l){return e.Zb(0,[(l()(),e.xb(0,0,null,null,0,"img",[["src","../../../assets/img/default.jpg"]],null,null,null,null,null))],null,null)}function E(l){return e.Zb(0,[(l()(),e.xb(0,0,null,null,5,null,null,null,null,null,null,null)),(l()(),e.xb(1,0,null,null,4,"ion-col",[["class","col-end-align"],["col",""]],null,null,null,c.rb,c.n)),e.wb(2,49152,null,0,a.u,[e.h,e.l,e.z],null,null),(l()(),e.xb(3,0,null,0,2,"ion-badge",[["color","secondary"]],null,null,null,c.hb,c.d)),e.wb(4,49152,null,0,a.k,[e.h,e.l,e.z],{color:[0,"color"]},null),(l()(),e.Wb(-1,0,["stock"]))],(function(l,n){l(n,4,0,"secondary")}),null)}function K(l){return e.Zb(0,[(l()(),e.xb(0,0,null,null,5,null,null,null,null,null,null,null)),(l()(),e.xb(1,0,null,null,4,"ion-col",[["class","col-end-align"],["col",""]],null,null,null,c.rb,c.n)),e.wb(2,49152,null,0,a.u,[e.h,e.l,e.z],null,null),(l()(),e.xb(3,0,null,0,2,"ion-badge",[["color","danger"]],null,null,null,c.hb,c.d)),e.wb(4,49152,null,0,a.k,[e.h,e.l,e.z],{color:[0,"color"]},null),(l()(),e.Wb(-1,0,["no stock"]))],(function(l,n){l(n,4,0,"danger")}),null)}function T(l){return e.Zb(0,[(l()(),e.xb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function Z(l){return e.Zb(0,[(l()(),e.xb(0,0,null,null,5,"ion-col",[],null,null,null,c.rb,c.n)),e.wb(1,49152,null,0,a.u,[e.h,e.l,e.z],null,null),(l()(),e.xb(2,0,null,0,3,"strong",[],null,null,null,null,null)),(l()(),e.xb(3,0,null,null,2,"del",[],null,null,null,null,null)),(l()(),e.Wb(4,null,["",""])),e.Qb(5,2)],null,(function(l,n){var u=e.Xb(n,4,0,l(n,5,0,e.Mb(n.parent.parent.parent.parent,0),n.parent.parent.context.$implicit.price,"INR"));l(n,4,0,u)}))}function S(l){return e.Zb(0,[(l()(),e.xb(0,0,null,null,39,"ion-card",[],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.addToBasket(l.parent.context.$implicit)&&t),t}),c.ob,c.g)),e.wb(1,49152,null,0,a.n,[e.h,e.l,e.z],null,null),(l()(),e.xb(2,0,null,0,1,"ion-ripple-effect",[],null,null,null,c.Pb,c.L)),e.wb(3,49152,null,0,a.fb,[e.h,e.l,e.z],null,null),(l()(),e.gb(16777216,null,0,1,null,_)),e.wb(5,16384,null,0,b.m,[e.P,e.L],{ngIf:[0,"ngIf"],ngIfThen:[1,"ngIfThen"],ngIfElse:[2,"ngIfElse"]},null),(l()(),e.gb(0,[["customImage",2]],0,0,null,j)),(l()(),e.gb(0,[["defaultImage",2]],0,0,null,A)),(l()(),e.xb(8,0,null,0,9,"ion-row",[],null,null,null,c.Qb,c.M)),e.wb(9,49152,null,0,a.hb,[e.h,e.l,e.z],null,null),(l()(),e.xb(10,0,null,0,3,"ion-col",[["col-10",""]],null,null,null,c.rb,c.n)),e.wb(11,49152,null,0,a.u,[e.h,e.l,e.z],null,null),(l()(),e.xb(12,0,null,0,1,"div",[],null,null,null,null,null)),(l()(),e.Wb(13,null,["",""])),(l()(),e.xb(14,0,null,0,3,"ion-col",[["col-2",""]],null,null,null,c.rb,c.n)),e.wb(15,49152,null,0,a.u,[e.h,e.l,e.z],null,null),(l()(),e.xb(16,0,null,0,1,"ion-icon",[["name","information-circle"]],null,null,null,c.Ab,c.w)),e.wb(17,49152,null,0,a.D,[e.h,e.l,e.z],{name:[0,"name"]},null),(l()(),e.xb(18,0,null,0,10,"ion-row",[],null,null,null,c.Qb,c.M)),e.wb(19,49152,null,0,a.hb,[e.h,e.l,e.z],null,null),(l()(),e.xb(20,0,null,0,4,"ion-col",[["col",""]],null,null,null,c.rb,c.n)),e.wb(21,49152,null,0,a.u,[e.h,e.l,e.z],null,null),(l()(),e.xb(22,0,null,0,2,"ion-note",[],null,null,null,c.Ob,c.K)),e.wb(23,49152,null,0,a.W,[e.h,e.l,e.z],null,null),(l()(),e.Wb(24,0,[" "," "])),(l()(),e.gb(16777216,null,0,1,null,E)),e.wb(26,16384,null,0,b.m,[e.P,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,0,1,null,K)),e.wb(28,16384,null,0,b.m,[e.P,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.xb(29,0,null,0,10,"ion-row",[],null,null,null,c.Qb,c.M)),e.wb(30,49152,null,0,a.hb,[e.h,e.l,e.z],null,null),(l()(),e.gb(16777216,null,0,1,null,T)),e.wb(32,16384,null,0,b.m,[e.P,e.L],{ngIf:[0,"ngIf"],ngIfThen:[1,"ngIfThen"]},null),(l()(),e.gb(0,[["displayOld",2]],0,0,null,Z)),(l()(),e.xb(34,0,null,0,5,"ion-col",[["class","newprice"]],null,null,null,c.rb,c.n)),e.wb(35,49152,null,0,a.u,[e.h,e.l,e.z],null,null),(l()(),e.xb(36,0,null,0,3,"strong",[],null,null,null,null,null)),(l()(),e.xb(37,0,null,null,2,"ins",[],null,null,null,null,null)),(l()(),e.Wb(38,null,["",""])),e.Qb(39,2)],(function(l,n){l(n,5,0,null!=n.parent.context.$implicit.productImageUrl,e.Mb(n,6),e.Mb(n,7)),l(n,17,0,"information-circle"),l(n,26,0,1==n.parent.context.$implicit.inStock),l(n,28,0,0==n.parent.context.$implicit.inStock),l(n,32,0,0!=n.parent.context.$implicit.price,e.Mb(n,33))}),(function(l,n){l(n,13,0,n.parent.context.$implicit.name),l(n,24,0,n.parent.context.$implicit.size);var u=e.Xb(n,38,0,l(n,39,0,e.Mb(n.parent.parent.parent,0),n.parent.context.$implicit.offeredPrice,"INR"));l(n,38,0,u)}))}function B(l){return e.Zb(0,[(l()(),e.xb(0,0,null,null,4,"ion-col",[["col-6",""],["size","6"]],null,null,null,c.rb,c.n)),e.wb(1,49152,null,0,a.u,[e.h,e.l,e.z],{size:[0,"size"]},null),(l()(),e.gb(16777216,null,0,1,null,L)),e.wb(3,16384,null,0,b.m,[e.P,e.L],{ngIf:[0,"ngIf"],ngIfThen:[1,"ngIfThen"]},null),(l()(),e.gb(0,[["productcard",2]],0,0,null,S))],(function(l,n){l(n,1,0,"6"),l(n,3,0,null!=n.context.$implicit,e.Mb(n,4))}),null)}function F(l){return e.Zb(0,[(l()(),e.xb(0,0,null,null,6,"div",[],null,null,null,null,null)),(l()(),e.xb(1,0,null,null,5,"ion-grid",[],null,null,null,c.yb,c.u)),e.wb(2,49152,null,0,a.B,[e.h,e.l,e.z],null,null),(l()(),e.xb(3,0,null,0,3,"ion-row",[],null,null,null,c.Qb,c.M)),e.wb(4,49152,null,0,a.hb,[e.h,e.l,e.z],null,null),(l()(),e.gb(16777216,null,0,1,null,B)),e.wb(6,278528,null,0,b.l,[e.P,e.L,e.s],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,6,0,n.context.ngIf)}),null)}function H(l){return e.Zb(0,[(l()(),e.xb(0,0,null,null,2,"div",[["class","spin"]],null,null,null,null,null)),(l()(),e.xb(1,0,null,null,1,"ion-spinner",[["name","bubbles"]],null,null,null,c.Yb,c.U)),e.wb(2,49152,null,0,a.qb,[e.h,e.l,e.z],{name:[0,"name"]},null)],(function(l,n){l(n,2,0,"bubbles")}),null)}function $(l){return e.Zb(0,[e.Ob(0,b.d,[e.u,e.k]),(l()(),e.xb(1,0,null,null,11,"ion-header",[],null,null,null,c.zb,c.v)),e.wb(2,49152,null,0,a.C,[e.h,e.l,e.z],null,null),(l()(),e.xb(3,0,null,0,9,"ion-toolbar",[["color","crimson"]],null,null,null,c.hc,c.db)),e.wb(4,49152,null,0,a.Ab,[e.h,e.l,e.z],{color:[0,"color"]},null),(l()(),e.xb(5,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,c.jb,c.f)),e.wb(6,49152,null,0,a.m,[e.h,e.l,e.z],null,null),(l()(),e.xb(7,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Mb(l,9).onClick(u)&&t),t}),c.gb,c.c)),e.wb(8,49152,null,0,a.h,[e.h,e.l,e.z],{defaultHref:[0,"defaultHref"]},null),e.wb(9,16384,null,0,a.i,[[2,a.gb],a.Gb,a.e],{defaultHref:[0,"defaultHref"]},null),(l()(),e.xb(10,0,null,0,2,"ion-title",[],null,null,null,c.fc,c.bb)),e.wb(11,49152,null,0,a.yb,[e.h,e.l,e.z],null,null),(l()(),e.Wb(12,0,[" Products:"," "])),(l()(),e.gb(16777216,null,null,1,null,z)),e.wb(14,16384,null,0,b.m,[e.P,e.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),e.xb(15,0,null,null,5,"ion-content",[["class","card-background-page"]],null,null,null,c.sb,c.o)),e.wb(16,49152,null,0,a.v,[e.h,e.l,e.z],null,null),(l()(),e.gb(16777216,null,0,2,null,F)),e.wb(18,16384,null,0,b.m,[e.P,e.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),e.Ob(131072,b.b,[e.h]),(l()(),e.gb(0,[["loadingErrorTemplate",2]],0,0,null,H))],(function(l,n){var u=n.component;l(n,4,0,"crimson"),l(n,8,0,u.defaultHref),l(n,9,0,u.defaultHref),l(n,14,0,u.basketObjObservable,e.Mb(n,20)),l(n,18,0,e.Xb(n,18,0,e.Mb(n,19).transform(u.allProductsAbservable)),e.Mb(n,20))}),(function(l,n){l(n,12,0,n.component.categoryName)}))}var D=e.tb("page-product-list",I,(function(l){return e.Zb(0,[(l()(),e.xb(0,0,null,null,1,"page-product-list",[],null,null,null,$,y)),e.wb(1,114688,null,0,I,[P,f.a,a.Db,a.b,i.a],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),W=u("s7LF"),N=function l(){_classCallCheck(this,l)},R=e.ub(r,[],(function(l){return e.Jb([e.Kb(512,e.j,e.Y,[[8,[o.a,D]],[3,e.j],e.x]),e.Kb(4608,b.o,b.n,[e.u]),e.Kb(4608,W.q,W.q,[]),e.Kb(4608,a.c,a.c,[e.z,e.g]),e.Kb(4608,a.Fb,a.Fb,[a.c,e.j,e.r]),e.Kb(4608,a.Kb,a.Kb,[a.c,e.j,e.r]),e.Kb(1073742336,b.c,b.c,[]),e.Kb(1073742336,W.p,W.p,[]),e.Kb(1073742336,W.e,W.e,[]),e.Kb(1073742336,a.Cb,a.Cb,[]),e.Kb(1073742336,i.q,i.q,[[2,i.v],[2,i.m]]),e.Kb(1073742336,N,N,[]),e.Kb(1073742336,r,r,[]),e.Kb(1024,i.k,(function(){return[[{path:"",component:I}]]}),[])])}))}}]);